<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Should I Sleep? - Smart Sleep Calculator & Wellness App</title>
  <meta name="description" content="Calculate optimal sleep and wake times based on 90-minute sleep cycles. Get personalized mood-based suggestions for better rest and improved wellness." />
  <meta name="keywords" content="sleep calculator, sleep cycles, wake time, bedtime, sleep wellness, mood tracking, sleep optimization" />
  <meta name="author" content="Zia Louise D. Mariano" />
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Should I Sleep? - Smart Sleep Calculator" />
  <meta property="og:description" content="Calculate optimal sleep and wake times based on 90-minute sleep cycles with mood-based suggestions." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://shouldisleep.app" />
  <meta property="og:image" content="./images/og-image.png" />
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Should I Sleep? - Smart Sleep Calculator" />
  <meta name="twitter:description" content="Calculate optimal sleep and wake times based on 90-minute sleep cycles." />
  <meta name="twitter:image" content="./images/twitter-card.png" />
  
  <!-- Favicon and App Icons -->
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="./images/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon-16x16.png" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#4f46e5" />
  
  <!-- External Resources -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="./css/styles.css" />
  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'GA_MEASUREMENT_ID');
  </script>
  
  <!-- Google Sign-In -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Should I Sleep?",
    "description": "Smart sleep calculator that helps optimize sleep and wake times based on 90-minute sleep cycles",
    "url": "https://shouldisleep.app",
    "applicationCategory": "HealthApplication",
    "operatingSystem": "Any",
    "author": {
      "@type": "Person",
      "name": "Zia Louise D. Mariano"
    }
  }
  </script>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col font-inter">
  <!-- Skip to main content for accessibility -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-indigo-600 text-white px-4 py-2 rounded-md z-50">
    Skip to main content
  </a>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 hidden">
    <div class="text-center">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"></div>
      <p class="text-gray-600">Calculating optimal sleep times...</p>
    </div>
  </div>

  <!-- Header -->
  <header class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 shadow-lg">
    <div class="container mx-auto max-w-4xl">
      <div class="flex justify-between items-center mb-4">
        <h1 class="text-3xl font-bold flex items-center gap-3 animate-fade-in">
          <i class="fas fa-bed text-yellow-300"></i> 
          Should I Sleep?
        </h1>
        <div class="flex items-center gap-4">
          <!-- User Profile Button -->
          <button id="profile-btn" class="hidden bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2">
            <img id="user-avatar" src="" alt="User Avatar" class="w-6 h-6 rounded-full" />
            <span id="user-name" class="text-sm"></span>
          </button>
          <!-- Sign In Button -->
          <button id="sign-in-btn" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2">
            <i class="fab fa-google"></i>
            <span>Sign In</span>
          </button>
          <!-- Sign Out Button -->
          <button id="sign-out-btn" class="hidden bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg transition-all duration-200">
            Sign Out
          </button>
        </div>
      </div>
      <p class="text-indigo-100 max-w-2xl animate-slide-up">
        Calculate the best sleep or wake times based on 90-minute sleep cycles and get personalized mood-based suggestions to improve your rest.
      </p>
    </div>
  </header>

  <!-- Main Content -->
  <main id="main-content" class="flex-grow container mx-auto px-4 py-8 max-w-4xl">
    
    <!-- Time Input Section -->
    <section class="bg-white rounded-xl shadow-lg p-6 mb-8 transform hover:scale-105 transition-transform duration-200" aria-labelledby="time-section-title">
      <h2 id="time-section-title" class="text-2xl font-semibold mb-6 text-indigo-700 flex items-center gap-3">
        <i class="fas fa-clock text-indigo-500"></i> 
        Select Your Current Time or Desired Wake Time
      </h2>

      <div class="grid md:grid-cols-2 gap-6">
        <div class="space-y-2">
          <label for="currentTime" class="block font-medium text-gray-700 text-sm">
            Current Time
            <span class="text-red-500" aria-label="required">*</span>
          </label>
          <input
            type="time"
            id="currentTime"
            class="w-full border-2 border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200"
            aria-describedby="current-time-help"
          />
          <p id="current-time-help" class="text-xs text-gray-500">Enter your current time to calculate wake times</p>
        </div>
        
        <div class="space-y-2">
          <label for="wakeTime" class="block font-medium text-gray-700 text-sm">
            Desired Wake Time
            <span class="text-red-500" aria-label="required">*</span>
          </label>
          <input
            type="time"
            id="wakeTime"
            class="w-full border-2 border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200"
            aria-describedby="wake-time-help"
          />
          <p id="wake-time-help" class="text-xs text-gray-500">Enter your desired wake time to calculate sleep times</p>
        </div>
      </div>

      <div class="mt-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400">
        <p class="text-sm text-blue-800 flex items-center gap-2">
          <i class="fas fa-info-circle"></i>
          Enter either your current time or the time you want to wake up. Leave the other blank.
        </p>
      </div>

      <!-- Input Validation Messages -->
      <div id="validation-messages" class="mt-4 space-y-2 hidden">
        <div class="p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
          <i class="fas fa-exclamation-triangle mr-2"></i>
          <span id="validation-text"></span>
        </div>
      </div>
    </section>

    <!-- Mood Selection Section -->
    <section class="bg-white rounded-xl shadow-lg p-6 mb-8 transform hover:scale-105 transition-transform duration-200" aria-labelledby="mood-section-title">
      <h2 id="mood-section-title" class="text-2xl font-semibold mb-6 text-indigo-700 flex items-center gap-3">
        <i class="fas fa-smile text-indigo-500"></i> 
        How Are You Feeling?
      </h2>
      
      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4" role="radiogroup" aria-labelledby="mood-section-title">
        <button
          data-mood="neutral"
          class="mood-btn bg-gray-100 hover:bg-indigo-100 text-gray-700 rounded-xl py-4 px-3 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 transform hover:scale-105"
          role="radio"
          aria-checked="true"
          tabindex="0"
        >
          <i class="fas fa-meh fa-2x mb-2 text-gray-500"></i>
          <span class="text-sm font-medium">Neutral</span>
        </button>
        
        <button
          data-mood="anxious"
          class="mood-btn bg-gray-100 hover:bg-indigo-100 text-gray-700 rounded-xl py-4 px-3 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 transform hover:scale-105"
          role="radio"
          aria-checked="false"
          tabindex="-1"
        >
          <i class="fas fa-brain fa-2x mb-2 text-orange-500"></i>
          <span class="text-sm font-medium">Anxious</span>
        </button>
        
        <button
          data-mood="tired"
          class="mood-btn bg-gray-100 hover:bg-indigo-100 text-gray-700 rounded-xl py-4 px-3 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 transform hover:scale-105"
          role="radio"
          aria-checked="false"
          tabindex="-1"
        >
          <i class="fas fa-bed fa-2x mb-2 text-blue-500"></i>
          <span class="text-sm font-medium">Tired</span>
        </button>
        
        <button
          data-mood="stressed"
          class="mood-btn bg-gray-100 hover:bg-indigo-100 text-gray-700 rounded-xl py-4 px-3 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 transform hover:scale-105"
          role="radio"
          aria-checked="false"
          tabindex="-1"
        >
          <i class="fas fa-exclamation-triangle fa-2x mb-2 text-red-500"></i>
          <span class="text-sm font-medium">Stressed</span>
        </button>
        
        <button
          data-mood="happy"
          class="mood-btn bg-gray-100 hover:bg-indigo-100 text-gray-700 rounded-xl py-4 px-3 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 transform hover:scale-105"
          role="radio"
          aria-checked="false"
          tabindex="-1"
        >
          <i class="fas fa-smile-beam fa-2x mb-2 text-green-500"></i>
          <span class="text-sm font-medium">Happy</span>
        </button>
        
        <button
          data-mood="sad"
          class="mood-btn bg-gray-100 hover:bg-indigo-100 text-gray-700 rounded-xl py-4 px-3 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 transform hover:scale-105"
          role="radio"
          aria-checked="false"
          tabindex="-1"
        >
          <i class="fas fa-frown fa-2x mb-2 text-purple-500"></i>
          <span class="text-sm font-medium">Sad</span>
        </button>
      </div>
    </section>

    <!-- Results Section -->
    <section class="bg-white rounded-xl shadow-lg p-6 mb-8" aria-labelledby="results-section-title">
      <h2 id="results-section-title" class="text-2xl font-semibold mb-6 text-indigo-700 flex items-center gap-3">
        <i class="fas fa-calculator text-indigo-500"></i> 
        Your Personalized Sleep Schedule
      </h2>
      
      <div id="results" class="text-gray-800 space-y-4 min-h-[8rem]" role="region" aria-live="polite" aria-label="Sleep calculation results">
        <div class="text-center py-8">
          <i class="fas fa-moon text-4xl text-gray-300 mb-4"></i>
          <p class="text-lg text-gray-500">Please enter a time and select your mood to see personalized suggestions.</p>
        </div>
      </div>
    </section>

    <!-- Sleep History Section (for signed-in users) -->
    <section id="sleep-history" class="bg-white rounded-xl shadow-lg p-6 mb-8 hidden" aria-labelledby="history-section-title">
      <h2 id="history-section-title" class="text-2xl font-semibold mb-6 text-indigo-700 flex items-center gap-3">
        <i class="fas fa-history text-indigo-500"></i> 
        Your Sleep History
      </h2>
      <div id="history-content" class="space-y-4">
        <!-- History items will be populated by JavaScript -->
      </div>
    </section>

    <!-- How It Works Section -->
    <section class="bg-white rounded-xl shadow-lg p-6 mb-8" aria-labelledby="how-it-works-title">
      <h2 id="how-it-works-title" class="text-2xl font-semibold mb-6 text-indigo-700 flex items-center gap-3">
        <i class="fas fa-info-circle text-indigo-500"></i> 
        How It Works
      </h2>
      
      <div class="grid md:grid-cols-3 gap-6">
        <div class="text-center p-4 bg-gradient-to-b from-blue-50 to-blue-100 rounded-lg">
          <i class="fas fa-sync-alt text-3xl text-blue-600 mb-4"></i>
          <h3 class="font-semibold text-gray-800 mb-2">90-Minute Cycles</h3>
          <p class="text-gray-600 text-sm">Sleep cycles last about 90 minutes. Waking up at the end of a cycle helps you feel more refreshed.</p>
        </div>
        
        <div class="text-center p-4 bg-gradient-to-b from-green-50 to-green-100 rounded-lg">
          <i class="fas fa-brain text-3xl text-green-600 mb-4"></i>
          <h3 class="font-semibold text-gray-800 mb-2">Mood-Based Tips</h3>
          <p class="text-gray-600 text-sm">Get personalized suggestions based on your current mood to optimize your sleep quality.</p>
        </div>
        
        <div class="text-center p-4 bg-gradient-to-b from-purple-50 to-purple-100 rounded-lg">
          <i class="fas fa-chart-line text-3xl text-purple-600 mb-4"></i>
          <h3 class="font-semibold text-gray-800 mb-2">Track Progress</h3>
          <p class="text-gray-600 text-sm">Sign in to save your preferences and track your sleep patterns over time.</p>
        </div>
      </div>
    </section>

    <!-- Quick Actions -->
    <section class="bg-white rounded-xl shadow-lg p-6 mb-8">
      <h2 class="text-2xl font-semibold mb-6 text-indigo-700 flex items-center gap-3">
        <i class="fas fa-bolt text-indigo-500"></i> 
        Quick Actions
      </h2>
      
      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <button id="set-current-time" class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 p-4 rounded-lg transition-all duration-200 flex flex-col items-center gap-2">
          <i class="fas fa-clock text-xl"></i>
          <span class="text-sm font-medium">Set Current Time</span>
        </button>
        
        <button id="save-preferences" class="bg-green-100 hover:bg-green-200 text-green-700 p-4 rounded-lg transition-all duration-200 flex flex-col items-center gap-2">
          <i class="fas fa-save text-xl"></i>
          <span class="text-sm font-medium">Save Preferences</span>
        </button>
        
        <button id="share-results" class="bg-blue-100 hover:bg-blue-200 text-blue-700 p-4 rounded-lg transition-all duration-200 flex flex-col items-center gap-2">
          <i class="fas fa-share text-xl"></i>
          <span class="text-sm font-medium">Share Results</span>
        </button>
        
        <button id="feedback-btn" class="bg-yellow-100 hover:bg-yellow-200 text-yellow-700 p-4 rounded-lg transition-all duration-200 flex flex-col items-center gap-2">
          <i class="fas fa-comment text-xl"></i>
          <span class="text-sm font-medium">Give Feedback</span>
        </button>
      </div>
    </section>
  </main>

  <!-- Feedback Modal -->
  <div id="feedback-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4">
      <h3 class="text-xl font-semibold mb-4 text-gray-800">Share Your Feedback</h3>
      <form id="feedback-form">
        <div class="mb-4">
          <label for="feedback-type" class="block text-sm font-medium text-gray-700 mb-2">Feedback Type</label>
          <select id="feedback-type" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
            <option value="suggestion">Suggestion</option>
            <option value="bug">Bug Report</option>
            <option value="compliment">Compliment</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="mb-4">
          <label for="feedback-message" class="block text-sm font-medium text-gray-700 mb-2">Message</label>
          <textarea id="feedback-message" rows="4" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500" placeholder="Tell us what you think..."></textarea>
        </div>
        <div class="flex gap-3">
          <button type="submit" class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-lg transition-colors">
            Send Feedback
          </button>
          <button type="button" id="close-feedback" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg transition-colors">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-12">
    <div class="container mx-auto max-w-6xl px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center md:text-left">
        <!-- App Info -->
        <div class="flex flex-col items-center md:items-start">
          <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
            <i class="fas fa-bed"></i>
            Should I Sleep?
          </h3>
          <p class="text-indigo-200 mb-4 max-w-xs">
            Your personal sleep optimization companion for better rest and wellness.
          </p>
        </div>
        
        <!-- Quick Links -->
        <div class="flex flex-col items-center">
          <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
          <div class="space-y-3 flex flex-col items-center">
            <a href="#main-content" class="text-indigo-200 hover:text-white transition-colors flex items-center gap-2 hover:scale-105 transform duration-200">
              <i class="fas fa-calculator"></i>Sleep Calculator
            </a>
            <a href="./blog.html" class="text-indigo-200 hover:text-white transition-colors flex items-center gap-2 hover:scale-105 transform duration-200">
              <i class="fas fa-blog"></i>Sleep Tips Blog
            </a>
            <a href="#how-it-works-title" class="text-indigo-200 hover:text-white transition-colors flex items-center gap-2 hover:scale-105 transform duration-200">
              <i class="fas fa-lightbulb"></i>How It Works
            </a>
            <a href="#feedback-btn" class="text-indigo-200 hover:text-white transition-colors flex items-center gap-2 hover:scale-105 transform duration-200">
              <i class="fas fa-comment"></i>Feedback
            </a>
          </div>
        </div>
        
        <!-- Legal -->
        <div class="flex flex-col items-center">
          <h4 class="text-lg font-semibold mb-4">Legal</h4>
          <div class="space-y-3 flex flex-col items-center">
            <a href="./privacy.html" class="text-indigo-200 hover:text-white transition-colors flex items-center gap-2 hover:scale-105 transform duration-200">
              <i class="fas fa-shield-alt"></i>Privacy Policy
            </a>
            <a href="./terms.html" class="text-indigo-200 hover:text-white transition-colors flex items-center gap-2 hover:scale-105 transform duration-200">
              <i class="fas fa-file-contract"></i>Terms of Service
            </a>
            <a href="mailto:contact@shouldisleep.app" class="text-indigo-200 hover:text-white transition-colors flex items-center gap-2 hover:scale-105 transform duration-200">
              <i class="fas fa-envelope"></i>Contact Us
            </a>
          </div>
        </div>
        
        <!-- Connect -->
        <div class="flex flex-col items-center">
          <h4 class="text-lg font-semibold mb-4">Connect</h4>
          <div class="flex justify-center space-x-6 mb-4">
            <a href="https://www.facebook.com/zia.louise.mariano.2024" target="_blank" rel="noopener noreferrer" 
               class="text-indigo-200 hover:text-white transition-all duration-200 text-2xl hover:scale-110 transform" 
               aria-label="Facebook">
              <i class="fab fa-facebook"></i>
            </a>
            <a href="https://www.instagram.com/ziyuhm/" target="_blank" rel="noopener noreferrer" 
               class="text-indigo-200 hover:text-white transition-all duration-200 text-2xl hover:scale-110 transform" 
               aria-label="Instagram">
              <i class="fab fa-instagram"></i>
            </a>
          </div>
        </div>
      </div>
      
      <!-- Copyright -->
      <div class="border-t border-indigo-500 mt-8 pt-8 text-center">
        <p class="text-indigo-200 mb-2">
          &copy; 2025 Should I Sleep? App
        </p>
        <p class="text-indigo-300 flex items-center justify-center gap-2">
          <i class="fas fa-heart text-red-400"></i>
          Made with love by Zia Louise D. Mariano
        </p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="./js/storage.js"></script>
  <script src="./js/auth.js"></script>
  <script src="./js/analytics.js"></script>
  <script src="./js/app.js"></script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
          .then((registration) => {
            console.log('SW registered: ', registration);
          })
          .catch((registrationError) => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }
  </script>
</body>
</html>
